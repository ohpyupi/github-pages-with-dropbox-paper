<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>React State and Lifecycle | Github Pages with Dropbox Paper</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="React State and Lifecycle" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This page introduces the concept of state and lifecycle in a React component. You can find a detailed component API reference here. Consider the ticking clock example from one of the previous sections. In Rendering Elements, we have only learned one way to update the UI. We call root.render() to change the rendered output:" />
<meta property="og:description" content="This page introduces the concept of state and lifecycle in a React component. You can find a detailed component API reference here. Consider the ticking clock example from one of the previous sections. In Rendering Elements, we have only learned one way to update the UI. We call root.render() to change the rendered output:" />
<link rel="canonical" href="/2022/07/26/React-State-and-Lifecycle.html" />
<meta property="og:url" content="/2022/07/26/React-State-and-Lifecycle.html" />
<meta property="og:site_name" content="Github Pages with Dropbox Paper" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-07-26T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="React State and Lifecycle" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-07-26T00:00:00+00:00","datePublished":"2022-07-26T00:00:00+00:00","description":"This page introduces the concept of state and lifecycle in a React component. You can find a detailed component API reference here. Consider the ticking clock example from one of the previous sections. In Rendering Elements, we have only learned one way to update the UI. We call root.render() to change the rendered output:","headline":"React State and Lifecycle","mainEntityOfPage":{"@type":"WebPage","@id":"/2022/07/26/React-State-and-Lifecycle.html"},"url":"/2022/07/26/React-State-and-Lifecycle.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Github Pages with Dropbox Paper" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Github Pages with Dropbox Paper</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">React State and Lifecycle</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-07-26T00:00:00+00:00" itemprop="datePublished">Jul 26, 2022
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>This page introduces the concept of state and lifecycle in a React component. You can find a <a href="https://reactjs.org/docs/react-component.html">detailed component API reference here</a>.
Consider the ticking clock example from <a href="https://reactjs.org/docs/rendering-elements.html#updating-the-rendered-element">one of the previous sections</a>. In <a href="https://reactjs.org/docs/rendering-elements.html#rendering-an-element-into-the-dom">Rendering Elements</a>, we have only learned one way to update the UI. We call <code class="language-plaintext highlighter-rouge">root.render()</code> to change the rendered output:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const root = ReactDOM.createRoot(document.getElementById('root'));
  
function tick() {
  const element = (
    &lt;div&gt;
      &lt;h1&gt;Hello, world!&lt;/h1&gt;
      &lt;h2&gt;It is {new Date().toLocaleTimeString()}.&lt;/h2&gt;
    &lt;/div&gt;
  );
  root.render(element);
}

setInterval(tick, 1000);
</code></pre></div></div>

<p><a href="https://codepen.io/gaearon/pen/gwoJZk?editors=0010"><strong>Try it on CodePen</strong></a>
In this section, we will learn how to make the <code class="language-plaintext highlighter-rouge">Clock</code> component truly reusable and encapsulated. It will set up its own timer and update itself every second.
We can start by encapsulating how the clock looks:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const root = ReactDOM.createRoot(document.getElementById('root'));

function Clock(props) {
  return (
    &lt;div&gt;
      &lt;h1&gt;Hello, world!&lt;/h1&gt;
      &lt;h2&gt;It is {props.date.toLocaleTimeString()}.&lt;/h2&gt;
    &lt;/div&gt;
  );
}

function tick() {
  root.render(&lt;Clock date={new Date()} /&gt;);
}

setInterval(tick, 1000);
</code></pre></div></div>

<p><a href="https://codepen.io/gaearon/pen/dpdoYR?editors=0010"><strong>Try it on CodePen</strong></a>
However, it misses a crucial requirement: the fact that the <code class="language-plaintext highlighter-rouge">Clock</code> sets up a timer and updates the UI every second should be an implementation detail of the <code class="language-plaintext highlighter-rouge">Clock</code>.
Ideally we want to write this once and have the <code class="language-plaintext highlighter-rouge">Clock</code> update itself:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root.render(&lt;Clock /&gt;);
</code></pre></div></div>

<p>To implement this, we need to add “state” to the <code class="language-plaintext highlighter-rouge">Clock</code> component.
State is similar to props, but it is private and fully controlled by the component.</p>

<h2 id="converting-a-function-to-a-class">Converting a Function to a Class</h2>

<p>You can convert a function component like <code class="language-plaintext highlighter-rouge">Clock</code> to a class in five steps:</p>

<ol>
  <li>Create an <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes">ES6 class</a>, with the same name, that extends <code class="language-plaintext highlighter-rouge">React.Component</code>.</li>
  <li>Add a single empty method to it called <code class="language-plaintext highlighter-rouge">render()</code>.</li>
  <li>Move the body of the function into the <code class="language-plaintext highlighter-rouge">render()</code> method.</li>
  <li>Replace <code class="language-plaintext highlighter-rouge">props</code> with <code class="language-plaintext highlighter-rouge">this.props</code> in the <code class="language-plaintext highlighter-rouge">render()</code> body.</li>
  <li>Delete the remaining empty function declaration.
 class Clock extends React.Component {
   render() {
     return (
       &lt;div&gt;
         &lt;h1&gt;Hello, world!&lt;/h1&gt;
         &lt;h2&gt;It is {this.props.date.toLocaleTimeString()}.&lt;/h2&gt;
       &lt;/div&gt;
     );
   }
 }</li>
</ol>

<p><a href="https://codepen.io/gaearon/pen/zKRGpo?editors=0010"><strong>Try it on CodePen</strong></a></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Clock is now defined as a class rather than a function.
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">render</code> method will be called each time an update happens, but as long as we render <code class="language-plaintext highlighter-rouge">&lt;Clock /&gt;</code> into the same DOM node, only a single instance of the <code class="language-plaintext highlighter-rouge">Clock</code> class will be used. This lets us use additional features such as local state and lifecycle methods.</p>


  </div><a class="u-url" href="/2022/07/26/React-State-and-Lifecycle.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Github Pages with Dropbox Paper</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Github Pages with Dropbox Paper</li><li><a class="u-email" href="mailto:your-email@example.com">your-email@example.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
